{
  "name": "03Zalo Reminder - 30 minutes before (No DataStore, Google Sheets )",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "quocdatn8nmmmmmm11232",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        816,
        960
      ],
      "id": "630e5531-e20b-481f-9f34-9b663ac939f3",
      "name": "Webhook",
      "webhookId": "75e99638-4736-48b2-a248-46b4ceb0e5c8"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://bot-api.zaloplatforms.com/bot{{$json.access_token.trim()}}/setWebhook ",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "={{ $json.Webhook_URL }}"
            },
            {
              "name": "secret_token",
              "value": "aa1233456"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1360,
        288
      ],
      "id": "4235bf34-f755-4371-b3d7-b45a539139ff",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://bot-api.zaloplatforms.com/bot{{$('Input').first().json.access_token.trim() }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "={{ $('Input').first().json.fromID }}"
            },
            {
              "name": "text",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1856,
        960
      ],
      "id": "92981117-6948-4865-99af-9217e56d55ca",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "801137d3-13bc-4dae-a74d-bfb1c4454f77",
              "name": "access_token",
              "value": "3682309957303154161:toHJdCNZuRLAbgzFAthLBcGJROrUYGJGdRwfGNwipSjhMXQMAXFxzKIearPkfHEE",
              "type": "string"
            },
            {
              "id": "65494de1-7370-4e5d-9a5d-70c95874f65d",
              "name": "chatInput",
              "value": "={{ $json.body.message.text }}",
              "type": "string"
            },
            {
              "id": "30c89bc2-ac70-4c5f-a403-b5b9574ee62d",
              "name": "sessionID",
              "value": "={{ $json.body.message.chat.id }}",
              "type": "string"
            },
            {
              "id": "e0999750-cde7-47c3-ad1d-b508c1bba40c",
              "name": "fromID",
              "value": "={{ $json.body.message.from.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1088,
        960
      ],
      "id": "e024d081-ca34-44cf-9192-dfdc23e07af8",
      "name": "Input"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        912,
        288
      ],
      "id": "f5e356e3-ce12-49fe-82cc-00aa80fc0d07",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "801137d3-13bc-4dae-a74d-bfb1c4454f77",
              "name": "access_token",
              "value": "3682309957303154161:toHJdCNZuRLAbgzFAthLBcGJROrUYGJGdRwfGNwipSjhMXQMAXFxzKIearPkfHEE",
              "type": "string"
            },
            {
              "id": "851b57e5-fbbc-4793-9fe1-8b70c2dea794",
              "name": "Webhook_URL",
              "value": "https://vpsn8n.anhlaptrinh.vn/webhook/quocdatn8nmmmmmm11232",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1136,
        288
      ],
      "id": "f98eb5dd-e3b3-4312-9661-f7d15485872c",
      "name": "Input1"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Input').item.json.sessionID }}",
        "contextWindowLength": 10
      },
      "id": "049076c8-5f42-468e-b52d-f3d3e85c92dc",
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        960,
        1344
      ]
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=L·∫•y c√°c s·ª± ki·ªán l·ªãch. S·ª≠ d·ª•ng start_date v√† end_date ·ªü ƒë·ªãnh d·∫°ng ISO (v√≠ d·ª•: 2025-06-25T20:00:00.000Z). N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh ng√†y, hi·ªÉn th·ªã c√°c s·ª± ki·ªán h√¥m nay.",
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "options": {
          "timeMin": "={{ $fromAI('start_date') || DateTime.local().startOf('day').toISO() }}",
          "timeMax": "={{ $fromAI('end_date') || DateTime.local().endOf('day').toISO() }}",
          "singleEvents": true,
          "orderBy": "startTime"
        }
      },
      "id": "33106edd-6d18-47b0-b1f0-47bb3398632b",
      "name": "Google Calendar - Get Events",
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.2,
      "position": [
        1136,
        1328
      ],
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=T·∫°o s·ª± ki·ªán l·ªãch. B·∫ÆT BU·ªòC: event_title (chu·ªói), start_date (ƒë·ªãnh d·∫°ng ISO), end_date (ƒë·ªãnh d·∫°ng ISO). QUAN TR·ªåNG: Ch·ªâ s·ª≠ d·ª•ng SAU KHI ƒë√£ ki·ªÉm tra availability b·∫±ng c√¥ng c·ª• \"Google Calendar - Check Availability\". N·∫øu ph√°t hi·ªán tr√πng l·ªãch, H·ªéI ng∆∞·ªùi d√πng tr∆∞·ªõc khi t·∫°o.",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "start": "={{ $fromAI('start_date') || DateTime.local().toISO() }}",
        "end": "={{ $fromAI('end_date') || DateTime.local().plus({hours: 1}).toISO() }}",
        "additionalFields": {
          "description": "={{ $fromAI('event_description') || '' }}",
          "location": "={{ $fromAI('location') || '' }}",
          "summary": "={{ $fromAI('event_title') || 'New Event' }}"
        }
      },
      "id": "ec6c6741-448a-481b-b2d9-57a8133f2814",
      "name": "Google Calendar - Create Event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.2,
      "position": [
        1296,
        1328
      ],
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=C·∫≠p nh·∫≠t s·ª± ki·ªán l·ªãch hi·ªán c√≥. B·∫Øt bu·ªôc: event_id. T√πy ch·ªçn: new_title, new_description, new_start_date (ISO), new_end_date (ISO), new_location.",
        "operation": "update",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "eventId": "={{ $fromAI('event_id') }}",
        "updateFields": {
          "description": "={{ $fromAI('new_description') }}",
          "end": "={{ $fromAI('new_end_date') }}",
          "location": "={{ $fromAI('new_location') }}",
          "start": "={{ $fromAI('new_start_date') }}",
          "summary": "={{ $fromAI('new_title') }}"
        }
      },
      "id": "b184b47a-c4f0-4b2f-8ba6-fde3b4d78c52",
      "name": "Google Calendar - Update Event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1456,
        1328
      ],
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=X√≥a s·ª± ki·ªán l·ªãch ngay khi ƒë∆∞·ª£c y√™u c·∫ßu. B·∫Øt bu·ªôc: event_id (chu·ªói).",
        "operation": "delete",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "eventId": "={{ $fromAI('event_id') }}",
        "options": {}
      },
      "id": "aba7b065-3c0e-4274-856b-e0eb19e0362f",
      "name": "Google Calendar - Delete Event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        1632,
        1328
      ],
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "B·∫ÆT BU·ªòC: Ki·ªÉm tra availability TR∆Ø·ªöC KHI t·∫°o b·∫•t k·ª≥ s·ª± ki·ªán m·ªõi n√†o. S·ª≠ d·ª•ng availability_start v√† availability_end ·ªü ƒë·ªãnh d·∫°ng ISO ƒë·ªÉ ki·ªÉm tra tr√πng l·ªãch. Tr·∫£ v·ªÅ danh s√°ch c√°c s·ª± ki·ªán hi·ªán c√≥ trong kho·∫£ng th·ªùi gian ƒë√≥. N·∫øu t√¨m th·∫•y s·ª± ki·ªán = c√≥ tr√πng l·ªãch, H·ªéI ng∆∞·ªùi d√πng tr∆∞·ªõc khi t·∫°o.",
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "limit": 20,
        "options": {
          "timeMin": "={{ $fromAI('availability_start') || DateTime.local().startOf('day').toISO() }}",
          "timeMax": "={{ $fromAI('availability_end') || DateTime.local().endOf('day').toISO() }}",
          "singleEvents": true,
          "orderBy": "startTime"
        }
      },
      "id": "65e48577-35d7-4247-ac44-473fe0aec67b",
      "name": "Google Calendar - Check Availability",
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.2,
      "position": [
        1872,
        1328
      ],
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "content": "# ü§ñ Google Calendar AI Agent - H∆∞·ªõng D·∫´n Cho Ng∆∞·ªùi M·ªõi\n\n## C√¥ng D·ª•ng\nTr·ª£ l√Ω AI th√¥ng minh gi√∫p qu·∫£n l√Ω Google Calendar b·∫±ng ng√¥n ng·ªØ t·ª± nhi√™n. Ch·ªâ c·∫ßn chat nh∆∞ n√≥i chuy·ªán v·ªõi ng∆∞·ªùi th·∫≠t!\n\n## ‚ú® T√≠nh NƒÉng\n- **T·∫°o S·ª± Ki·ªán**: \"ƒê·∫∑t l·ªãch ƒÉn tr∆∞a ng√†y mai l√∫c 12 gi·ªù\"\n- **Xem L·ªãch**: \"H√¥m nay t√¥i c√≥ cu·ªôc h·ªçp n√†o?\"\n- **S·ª≠a S·ª± Ki·ªán**: \"D·ªùi cu·ªôc h·ªçp 3 gi·ªù sang 4 gi·ªù chi·ªÅu\"\n- **X√≥a S·ª± Ki·ªán**: \"H·ªßy l·ªãch kh√°m rƒÉng\"\n- **Ki·ªÉm Tra Th·ªùi Gian R·∫£nh**: \"Chi·ªÅu nay t√¥i r·∫£nh l√∫c n√†o?\"\n\n## üõ†Ô∏è C√†i ƒê·∫∑t (Ch·ªâ L√†m 1 L·∫ßn)\n1. **Google Calendar**: K·∫øt n·ªëi t√†i kho·∫£n Google trong ph·∫ßn credentials c·ªßa n8n\n2. **API Gemini/OpenAI**: Th√™m API key v√†o credentials c·ªßa n8n\n3. **Import Workflow**: Copy file JSON v√† import v√†o n8n\n4. **K√≠ch Ho·∫°t**: B·∫≠t workflow l√™n\n\n## üí¨ C√°ch S·ª≠ D·ª•ng\nCh·ªâ c·∫ßn g√µ y√™u c·∫ßu b·∫±ng ng√¥n ng·ªØ t·ª± nhi√™n trong chat:\n\n**‚úÖ V√≠ D·ª• T·ªët:**\n- \"T·∫°o h·ªçp team ng√†y mai l√∫c 9 gi·ªù s√°ng\"\n- \"ƒê·∫∑t b·ªØa t·ªëi v·ªõi Sarah th·ª© 6 l√∫c 7 gi·ªù t·ªëi\"\n- \"Xem l·ªãch tu·∫ßn sau\"\n- \"H·ªßy cu·ªôc h·∫πn 2 gi·ªù chi·ªÅu\"\n- \"Th·ª© 5 t√¥i r·∫£nh l√∫c n√†o?\"\n\n**‚ùå N√™n Tr√°nh:**\n- Y√™u c·∫ßu ph·ª©c t·∫°p nhi·ªÅu b∆∞·ªõc\n- Th·ªùi gian kh√¥ng r√µ r√†ng (\"l√∫c n√†o ƒë√≥ sau n√†y\")\n\n## üîß C√°c Th√†nh Ph·∫ßn Ch√≠nh\n\n### **Chat Trigger**\n- ƒêi·ªÉm nh·∫≠n tin nh·∫Øn t·ª´ ng∆∞·ªùi d√πng\n- Duy tr√¨ l·ªãch s·ª≠ chat v·ªõi memory\n\n### **AI Agent (B·ªô N√£o)**\n- D√πng Gemini AI ho·∫∑c GPT-4 ƒë·ªÉ x·ª≠ l√Ω\n- ƒê√£ c·∫•u h√¨nh m√∫i gi·ªù Vi·ªát Nam\n- Tr·∫£ l·ªùi b·∫±ng ng√¥n ng·ªØ t·ª± nhi√™n\n\n### **C√¥ng C·ª• Google Calendar**\n- **Get Events**: L·∫•y l·ªãch c·ªßa b·∫°n\n- **Create Event**: T·∫°o cu·ªôc h·∫πn m·ªõi\n- **Update Event**: Ch·ªânh s·ª≠a s·ª± ki·ªán c√≥ s·∫µn\n- **Delete Event**: X√≥a cu·ªôc h·∫πn\n- **Check Availability**: T√¨m th·ªùi gian r·∫£nh\n\n### **Memory**\n- Nh·ªõ ng·ªØ c·∫£nh cu·ªôc tr√≤ chuy·ªán\n- Theo d√µi c√°c y√™u c·∫ßu v√† ph·∫£n h·ªìi tr∆∞·ªõc ƒë√≥\n\n## ‚öôÔ∏è C√†i ƒê·∫∑t Quan Tr·ªçng\n**M√∫i gi·ªù**: Asia/Ho_Chi_Minh (gi·ªù Vi·ªát Nam)  \n**Model AI**: Gemini 1.5 Flash ho·∫∑c GPT-4  \n**Th·ªùi l∆∞·ª£ng m·∫∑c ƒë·ªãnh**: 1 ti·∫øng cho s·ª± ki·ªán m·ªõi  \n**L·ªãch**: Google Calendar ch√≠nh c·ªßa b·∫°n  \n\n## üêõ X·ª≠ L√Ω S·ª± C·ªë\n\n**Sai Gi·ªù/Ng√†y?**\n- Ki·ªÉm tra timezone trong system message\n- X√°c nh·∫≠n m√∫i gi·ªù Google Calendar c·ªßa b·∫°n\n\n**L·ªói Schema?**\n- ƒê·∫£m b·∫£o credentials Google Calendar h·ª£p l·ªá\n- Ki·ªÉm tra calendar ID ƒë√∫ng\n\n**AI Kh√¥ng Ph·∫£n H·ªìi?**\n- X√°c nh·∫≠n API key c√≤n ho·∫°t ƒë·ªông\n- Ki·ªÉm tra workflow ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t\n\n## üöÄ M·∫πo Pro\n\n1. **N√≥i R√µ R√†ng**: \"2 gi·ªù chi·ªÅu mai\" t·ªët h∆°n \"chi·ªÅu mai\"\n2. **Cho ƒê·ªß Ng·ªØ C·∫£nh**: \"ƒê·∫∑t l·ªãch kh√°m rƒÉng\" thay v√¨ ch·ªâ \"l·ªãch h·∫πn\"\n3. **Ng√¥n Ng·ªØ T·ª± Nhi√™n**: AI hi·ªÉu c√°ch n√≥i chuy·ªán th√¥ng th∆∞·ªùng\n4. **Test D·∫ßn D·∫ßn**: B·∫Øt ƒë·∫ßu v·ªõi c√¢u ƒë∆°n gi·∫£n, sau ƒë√≥ th·ª≠ ph·ª©c t·∫°p\n\n## üìù V√≠ D·ª• H·ªôi Tho·∫°i\n\n**B·∫°n**: \"ƒê·∫∑t l·ªãch ƒÉn tr∆∞a v·ªõi kh√°ch h√†ng ng√†y mai l√∫c 12 gi·ªù\"  \n**AI**: \"‚úÖ ƒê√£ t·∫°o l·ªãch ƒÉn tr∆∞a ng√†y mai l√∫c 12:00! B·∫°n mu·ªën th√™m email kh√°ch ho·∫∑c ƒë·ªãa ƒëi·ªÉm kh√¥ng?\"  \n\n**B·∫°n**: \"Th√™m ƒë·ªãa ƒëi·ªÉm: Nh√† h√†ng Ph·ªë Bi·ªÉn\"  \n**AI**: \"‚úÖ ƒê√£ c·∫≠p nh·∫≠t ƒë·ªãa ƒëi·ªÉm: Nh√† h√†ng Ph·ªë Bi·ªÉn\"  \n\n**B·∫°n**: \"Xem l·ªãch ng√†y mai\"  \n**AI**: \"L·ªãch ng√†y mai c·ªßa b·∫°n: 12:00 - ƒÇn tr∆∞a v·ªõi kh√°ch h√†ng t·∫°i Nh√† h√†ng Ph·ªë Bi·ªÉn\"\n\n---\n\n**üéØ K·∫øt Qu·∫£**: M·ªôt tr·ª£ l√Ω AI calendar ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng, hi·ªÉu ti·∫øng Vi·ªát t·ª± nhi√™n v√† t·ª± ƒë·ªông qu·∫£n l√Ω Google Calendar cho b·∫°n!",
        "height": 2420,
        "width": 452
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -16,
        144
      ],
      "id": "0debd801-4da5-4413-96b8-d97837104334",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}",
        "options": {
          "systemMessage": "=B·∫°n l√† tr·ª£ l√Ω Google Calendar. H√¥m nay l√† {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').toFormat('cccc, MMMM d, yyyy') }}.\n\n**QUAN TR·ªåNG: S·ª≠ d·ª•ng m√∫i gi·ªù Vi·ªát Nam/H·ªì Ch√≠ Minh**\nLU√îN s·ª≠ d·ª•ng m√∫i gi·ªù Asia/Ho_Chi_Minh cho t·∫•t c·∫£ th·ªùi gian ƒë·ªÉ kh·ªõp v·ªõi v·ªã tr√≠ ng∆∞·ªùi d√πng.\n\n**üö® QUY T·∫ÆC B·∫ÆT BU·ªòC - KI·ªÇM TRA AVAILABILITY TR∆Ø·ªöC KHI T·∫†O EVENT:**\n\nTR∆Ø·ªöC KHI t·∫°o B·∫§T K·ª≤ s·ª± ki·ªán m·ªõi n√†o, b·∫°n PH·∫¢I:\n1. B·∫ÆT BU·ªòC s·ª≠ d·ª•ng c√¥ng c·ª• \"Google Calendar - Check Availability\" ƒë·ªÉ ki·ªÉm tra xem khung gi·ªù y√™u c·∫ßu c√≥ tr·ªëng kh√¥ng\n2. N·∫øu c√≥ TR√ôNG L·ªäCH (ƒë√£ c√≥ s·ª± ki·ªán t·∫°i th·ªùi ƒëi·ªÉm ƒë√≥):\n   - TUY·ªÜT ƒê·ªêI KH√îNG ƒë∆∞·ª£c t·∫°o s·ª± ki·ªán m·ªõi - D√ô NG∆Ø·ªúI D√ôNG C√ì N√ìI MU·ªêN GI·ªÆ NGUY√äN GI·ªú\n   - PH·∫¢I t·ª´ ch·ªëi v√† ƒë·ªÅ xu·∫•t 2 gi·∫£i ph√°p:\n     a) ƒê·ªÅ xu·∫•t d·ªùi cu·ªôc h·ªçp hi·ªán c√≥ sang gi·ªù kh√°c (s·ª≠ d·ª•ng Update Event tool)\n     b) ƒê·ªÅ xu·∫•t ƒë·∫∑t cu·ªôc h·ªçp m·ªõi v√†o gi·ªù kh√°c (v√≠ d·ª•: 15h-16h ho·∫∑c 17h-18h)\n   - N√ìI v·ªõi ng∆∞·ªùi d√πng: \"Th·ªùi gian n√†y ƒë√£ c√≥ [s·ªë l∆∞·ª£ng] l·ªãch r·ªìi: [li·ªát k√™ t√™n l·ªãch]. Em kh√¥ng th·ªÉ t·∫°o l·ªãch m·ªõi v√†o gi·ªù n√†y. B·∫°n mu·ªën:\n     - D·ªùi m·ªôt trong c√°c l·ªãch hi·ªán c√≥ sang gi·ªù kh√°c (v√≠ d·ª•: 15h-16h ho·∫∑c 17h-18h)?\n     - Ho·∫∑c ƒë·∫∑t cu·ªôc h·ªçp m·ªõi v√†o gi·ªù kh√°c?\"\n   - CH·ªú ng∆∞·ªùi d√πng ch·ªçn m·ªôt trong c√°c gi·∫£i ph√°p\n3. CH·ªà t·∫°o s·ª± ki·ªán M·ªöI n·∫øu:\n   - Khung gi·ªù TR·ªêNG (kh√¥ng c√≥ tr√πng l·ªãch)\n   - KH√îNG BAO GI·ªú t·∫°o event m·ªõi khi c√≥ tr√πng l·ªãch, d√π ng∆∞·ªùi d√πng c√≥ n√≥i mu·ªën gi·ªØ nguy√™n gi·ªù\n\n**QUY T·∫ÆC GI·ªú ƒê∆†N GI·∫¢N - TU√ÇN TH·ª¶ CH√çNH X√ÅC:**\n\nKhi ng∆∞·ªùi d√πng n√≥i \"5 pm\" ho·∫∑c \"5h chi·ªÅu\" ‚Üí d√πng gi·ªù: 17\nKhi ng∆∞·ªùi d√πng n√≥i \"12 pm\" ho·∫∑c \"12h tr∆∞a\" ‚Üí d√πng gi·ªù: 12 (tr∆∞a)\nKhi ng∆∞·ªùi d√πng n√≥i \"3 pm\" ho·∫∑c \"3h chi·ªÅu\" ‚Üí d√πng gi·ªù: 15\nKhi ng∆∞·ªùi d√πng n√≥i \"8 pm\" ho·∫∑c \"8h t·ªëi\" ‚Üí d√πng gi·ªù: 20\nKhi ng∆∞·ªùi d√πng n√≥i \"9 am\" ho·∫∑c \"9h s√°ng\" ‚Üí d√πng gi·ªù: 9\n\n**QUY T·∫ÆC NG√ÄY:**\nKhi ng∆∞·ªùi d√πng n√≥i \"today\" ‚Üí d√πng: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh') }}\nKhi ng∆∞·ªùi d√πng n√≥i \"tomorrow\" ‚Üí d√πng: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({days: 1}) }}\n\n**V√ç D·ª§ CH√çNH X√ÅC C·∫¶N TU√ÇN THEO (Gi·ªù Vi·ªát Nam):**\n\nNg∆∞·ªùi d√πng: \"tomorrow 12 pm\" (ƒÉn tr∆∞a)\nB·∫°n PH·∫¢I t·∫°o:\n- start_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({days: 1}).set({hour: 12, minute: 0, second: 0, millisecond: 0}).toISO() }}\n- end_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({days: 1}).set({hour: 13, minute: 0, second: 0, millisecond: 0}).toISO() }}\n\nNg∆∞·ªùi d√πng: \"today 5 pm\"\nB·∫°n PH·∫¢I t·∫°o:\n- start_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').set({hour: 17, minute: 0, second: 0, millisecond: 0}).toISO() }}\n- end_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').set({hour: 18, minute: 0, second: 0, millisecond: 0}).toISO() }}\n\nNg∆∞·ªùi d√πng: \"tomorrow 9 am\"\nB·∫°n PH·∫¢I t·∫°o:\n- start_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({days: 1}).set({hour: 9, minute: 0, second: 0, millisecond: 0}).toISO() }}\n- end_date: {{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({days: 1}).set({hour: 10, minute: 0, second: 0, millisecond: 0}).toISO() }}\n\n**QUY T·∫ÆC QUAN TR·ªåNG:**\n1. LU√îN s·ª≠ d·ª•ng m√∫i gi·ªù Asia/Ho_Chi_Minh\n2. LU√îN ki·ªÉm tra availability TR∆Ø·ªöC KHI t·∫°o s·ª± ki·ªán\n3. TUY·ªÜT ƒê·ªêI KH√îNG t·∫°o s·ª± ki·ªán m·ªõi khi c√≥ tr√πng l·ªãch - ph·∫£i t·ª´ ch·ªëi v√† ƒë·ªÅ xu·∫•t gi·∫£i ph√°p\n4. Khi c√≥ tr√πng l·ªãch, ƒë·ªÅ xu·∫•t d·ªùi l·ªãch hi·ªán c√≥ ho·∫∑c ƒë·∫∑t l·ªãch m·ªõi v√†o gi·ªù kh√°c\n5. KH√îNG BAO GI·ªú d√πng m√∫i gi·ªù +10:00 - ch·ªâ d√πng gi·ªù Vi·ªát Nam\n6. X√°c nh·∫≠n l·∫°i ng√†y v√† gi·ªù ch√≠nh x√°c trong ph·∫£n h·ªìi c·ªßa b·∫°n\n\n**KH√îNG NH·∫¶M L·∫™N M√öI GI·ªú - CH·ªà D√ôNG GI·ªú VI·ªÜT NAM!**"
        }
      },
      "id": "c2e75dda-4fdb-488e-bdd6-7e30eddba6b2",
      "name": "Calendar AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        1280,
        960
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1008,
        1152
      ],
      "id": "0ef13f7c-ec87-4512-82cc-8c615ef04ff7",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "O00uQUVJ3Z2xrDsL",
          "name": "OpenAi account 7"
        }
      }
    },
    {
      "parameters": {
        "content": "Calendar",
        "height": 800,
        "width": 1616,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        704,
        864
      ],
      "id": "72a41417-9af1-4aa6-9765-45f42ef3f972",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "height": 304,
        "width": 1488
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        720,
        208
      ],
      "id": "b32ade8b-6b90-4c05-bbfe-1f039788a36d",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Nh·∫Øc L·ªãch",
        "height": 640,
        "width": 1936,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        704,
        1856
      ],
      "id": "6541d4ab-e6b7-4e86-baa4-f37025c9a05d",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "check-time-before",
              "leftValue": "={{ DateTime.fromISO(($json.start?.dateTime || $json.start?.date)).diffNow('minutes').minutes }}",
              "rightValue": 30,
              "operator": {
                "type": "number",
                "operation": "lte"
              }
            },
            {
              "id": "check-time-after",
              "leftValue": "={{ DateTime.fromISO(($json.start?.dateTime || $json.start?.date)).diffNow('minutes').minutes }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1920,
        2096
      ],
      "id": "bc2cc61e-461c-4e9f-9706-c98550950a6c",
      "name": "Check 30min tr∆∞·ªõc?"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 25
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        960,
        2096
      ],
      "id": "00528436-dbc0-4ccd-967b-b0487aa6f7dd",
      "name": "Schedule Trigger2"
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "nguyenvannhuan90123@gmail.com",
          "mode": "list",
          "cachedResultName": "nguyenvannhuan90123@gmail.com"
        },
        "timeMin": "={{ DateTime.local().setZone('Asia/Ho_Chi_Minh').toISO() }}",
        "timeMax": "={{ DateTime.local().setZone('Asia/Ho_Chi_Minh').plus({ minutes: 30 }).toISO() }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        1392,
        2096
      ],
      "id": "19e591ba-748c-47a9-9e82-08a59cb794d8",
      "name": "Get Events Next 30min1",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "podcmfCkxJVn1em8",
          "name": "Google Calendar account 8"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "check-has-event",
              "leftValue": "={{ $json.id }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1600,
        2096
      ],
      "id": "c16a40ed-ba7f-4d13-918d-2ef604952796",
      "name": "C√≥ cu·ªôc h·ªçp?1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "801137d3-13bc-4dae-a74d-bfb1c4454f77",
              "name": "access_token",
              "value": "3682309957303154161:toHJdCNZuRLAbgzFAthLBcGJROrUYGJGdRwfGNwipSjhMXQMAXFxzKIearPkfHEE",
              "type": "string"
            },
            {
              "id": "851b57e5-fbbc-4793-9fe1-8b70c2dea794",
              "name": "Webhook_URL",
              "value": "https://vpsn8n.anhlaptrinh.vn/webhook/quocdatn8nmmmmmm11232",
              "type": "string"
            },
            {
              "id": "3c6e051a-dd1a-4433-92c7-e7481a98146a",
              "name": "fromID",
              "value": "c083c42b2060c93e9071",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1184,
        2096
      ],
      "id": "9babaa77-500d-4c6b-9d16-7cf065ee893c",
      "name": "Input3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://bot-api.zaloplatforms.com/bot{{$('Input3').first().json.access_token.trim() }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "={{ $('Input3').first().json.fromID }}"
            },
            {
              "name": "text",
              "value": "={{ \n  'üìÖ Cu·ªôc H·ªçp S·∫Øp Di·ªÖn Ra \\n\\n' +\n  'üìù Ti√™u ƒë·ªÅ: ' + $json.summary + '\\n' +\n  '‚è∞ B·∫Øt ƒë·∫ßu: ' + $json.start.dateTime + '\\n' +\n  'üïë K·∫øt th√∫c: ' + $json.end.dateTime + '\\n\\n' +\n  'üìÑ M√¥ t·∫£: ' + ($json.description || 'Kh√¥ng c√≥') \n}}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2240,
        2080
      ],
      "id": "0e41608a-95b9-4a85-81b9-288f94fd7635",
      "name": "Nh·∫Øc-L·ªãch-S·∫Øp-Di·ªÖn-Ra"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input": {
      "main": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Input1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar - Get Events": {
      "ai_tool": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar - Create Event": {
      "ai_tool": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar - Update Event": {
      "ai_tool": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar - Delete Event": {
      "ai_tool": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar - Check Availability": {
      "ai_tool": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Calendar AI Agent": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Calendar AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get Events Next 30min1": {
      "main": [
        [
          {
            "node": "C√≥ cu·ªôc h·ªçp?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "C√≥ cu·ªôc h·ªçp?1": {
      "main": [
        [
          {
            "node": "Check 30min tr∆∞·ªõc?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger2": {
      "main": [
        [
          {
            "node": "Input3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check 30min tr∆∞·ªõc?": {
      "main": [
        [
          {
            "node": "Nh·∫Øc-L·ªãch-S·∫Øp-Di·ªÖn-Ra",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input3": {
      "main": [
        [
          {
            "node": "Get Events Next 30min1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "56f828bf-17f3-4670-8396-5c3cfd49f670",
  "meta": {
    "instanceId": "8ae9064574590f4bef62fe6c8cafaae52a5a90dd40cb184103af1049753a2d5d"
  },
  "id": "HHnamj2it66iwm4cp89Ub",
  "tags": []
}